{"version":3,"sources":["test.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["'use strict';\n$(function(){\n    /**\n     * モーダルを開く\n     */\n    $('.jsc-modal-trigger').on('click' , function(){\n        $('.model-overlay').fadeIn();\n    });\n    /**\n     * モーダルを開く\n     */\n    $('.jsc-modal-trigger-benefits').on('click' , function(){\n        $('.jsc-delete').hide();\n        $('.model-overlay-benefits').fadeIn();\n    });\n    /**\n     * モーダルを閉じる (キャンセルボタン) \n     */ \n    $('.jsc-check-cancel').on('click' , function(){\n        $('.model-overlay').fadeOut();\n    });\n    /**\n     * モーダルを閉じる (決定ボタン)(仮)\n     * フロント側かこっちかでデータをControllerに投げる実装を入れる。 \n     */ \n    $('.jsc-check-decied').on('click' , function(){\n        $('.model-overlay').fadeOut();\n    });\n    /**\n     * プライバシーポリシー\n     * is-activeで表示する内容を切り替える\n     */\n    $('.p-privacyPolicy__listItem').on('click' , function(){\n        $(this).toggleClass('is-active');\n        $(this).next('.jsc-privacyPolicy-count').toggleClass('is-active');\n    });\n    /**\n     * トップ (暫定処理)\n     * is-activeで表示する内容を切り替える\n     */\n    $('.p-userTop__listItem').on('click' , function(){\n        if($(this).hasClass('jsc-coupon-count')){\n            $('.jsc-stamp-count').removeClass('is-active');\n            $('#jsc-stamp-count').removeClass('is-active');\n            $('.jsc-coupon-count').addClass('is-active');\n            $('#jsc-coupon-count').addClass('is-active');\n        }　else　if($(this).hasClass('jsc-stamp-count')) {\n            $('.jsc-coupon-count').removeClass('is-active');\n            $('#jsc-coupon-count').removeClass('is-active');\n            $('.jsc-stamp-count').addClass('is-active');\n            $('#jsc-stamp-count').addClass('is-active');\n        }\n    });\n    /**\n     * クーポン一覧 (暫定処理)\n     * is-activeで表示する内容を切り替える\n     */\n    $('.p-couponList__coupon__tab').on('click' , function(){\n        if($(this).hasClass('jsc-coupon-public')){\n            $('.jsc-coupon-private').removeClass('is-active');\n            $('#jsc-coupon-private').removeClass('is-active');\n            $('.jsc-coupon-public').addClass('is-active');\n            $('#jsc-coupon-public').addClass('is-active');\n        }　else　if($(this).hasClass('jsc-coupon-private')) {\n            $('.jsc-coupon-public').removeClass('is-active');\n            $('#jsc-coupon-public').removeClass('is-active');\n            $('.jsc-coupon-private').addClass('is-active');\n            $('#jsc-coupon-private').addClass('is-active');\n        }\n    });\n    /**\n     * スタンプカード一覧 (暫定処理)　一つにまとめたい\n     * is-activeで表示する内容を切り替える\n     */\n    $('.p-stampList__stamp__tab').on('click' , function(){\n        if($(this).hasClass('jsc-stampcard-public')){\n            $('.jsc-stampcard-private').removeClass('is-active');\n            $('#jsc-stampcard-private').removeClass('is-active');\n            $('.jsc-stampcard-public').addClass('is-active');\n            $('#jsc-stampcard-public').addClass('is-active');\n        }　else　if($(this).hasClass('jsc-stampcard-private')) {\n            $('.jsc-stampcard-public').removeClass('is-active');\n            $('#jsc-stampcard-public').removeClass('is-active');\n            $('.jsc-stampcard-private').addClass('is-active');\n            $('#jsc-stampcard-private').addClass('is-active');\n        }\n    });\n    /**\n     * 参考クーポンモーダル (暫定処理)\n     * is-activeで表示する内容を切り替える\n     */\n    $('.c-input__modal__tab').on('click' , function(){\n        if($(this).hasClass('jsc-coupon-public')){\n            $('.jsc-coupon-private').removeClass('is-active');\n            $('#jsc-coupon-private').removeClass('is-active');\n            $('.jsc-coupon-public').addClass('is-active');\n            $('#jsc-coupon-public').addClass('is-active');\n        }　else　if($(this).hasClass('jsc-coupon-private')) {\n            $('.jsc-coupon-public').removeClass('is-active');\n            $('#jsc-coupon-public').removeClass('is-active');\n            $('.jsc-coupon-private').addClass('is-active');\n            $('#jsc-coupon-private').addClass('is-active');\n        }\n    });\n    /**\n     * 分析画面のタブ (暫定処理)\n     * is-activeで表示する内容を切り替える\n     */\n    $('.p-analytics__tab').on('click' , function(){\n        if($(this).hasClass('jsc-coupon-count')){\n            $('.jsc-stamp-count').removeClass('is-active');\n            $('#jsc-stamp-count').removeClass('is-active');\n            $('.jsc-coupon-count').addClass('is-active');\n            $('#jsc-coupon-count').addClass('is-active');\n        }　else　if($(this).hasClass('jsc-stamp-count')) {\n            $('.jsc-coupon-count').removeClass('is-active');\n            $('#jsc-coupon-count').removeClass('is-active');\n            $('.jsc-stamp-count').addClass('is-active');\n            $('#jsc-stamp-count').addClass('is-active');\n        }\n    });\n    /**\n     * 全て選択ボタン\n     * \n     */\n    $('.jsc-selectAll').on('click',function(){\n        var shop = $('input[type=\"checkbox\"]').length;\n        var check = $('input[type=\"checkbox\"]'+':checked').length;\n        if(check >= 0){\n            $('.jsc-selectAll').html('全て解除');\n            $('input[type=\"checkbox\"]').closest('label').addClass('is-check');\n            $('input[type=\"checkbox\"]').prop('checked',true);\n        }\n        if(check === shop){\n            $('.jsc-selectAll').html('全て選択');\n            $('input[type=\"checkbox\"]').closest('label').removeClass('is-check');\n            $('input[type=\"checkbox\"]').prop('checked',false);\n        }\n    });\n    /**\n     * チェックされた時にチェックボックスのデザインを変更する\n     * \n     */\n    $('input[type=\"checkbox\"]').on('click', function() {\n        var prop = $(this).prop('checked');\n    \n        if(prop) {\n          $(this).closest('label').addClass('is-check');\n        } else {\n          $(this).closest('label').removeClass('is-check');\n          $('.jsc-selectAll').html('全て選択');\n        }\n    });\n    /**\n     * 各確認画面から戻った際にチェックされた要素のチェックボックスのデザインを変更する\n     * \n     */\n    $(window).on('load', function() {\n        var check = $('input[type=\"checkbox\"]'+':checked').length;\n        var radio_check = $('input[type=\"radio\"]'+':checked').length;\n        if(check >= 0 && radio_check >= 0) {\n          $('input[type=\"checkbox\"]'+':checked').closest('label').addClass('is-check');\n          $('input[type=\"radio\"]'+':checked').closest('label').addClass('is-check');\n        } \n    });\n    /**\n     * 色選択のラジオボタンのデザインを変更する\n     * \n     */\n    $('input[type=\"radio\"]').on('click', function() {\n        var prop = $(this).prop('checked');\n        var name = $(this).attr('name');\n    \n        if(prop) {\n            $('input[type=\"radio\"]').not(name).closest('label').removeClass('is-check');\n            $(this).closest('label').addClass('is-check');\n        }\n    });\n    /**\n     * edit時のラジオボタンのデザインを変更する\n     * \n     */\n    var type = $('.jsc-contract-field').val();\n    $('p-stampEdit__form__state__radio__label').find('input[type=\"radio\"]').prop('checked', function() {\n        var prop = $('input[type=\"radio\"]').prop('checked');\n        if(prop) {\n            $(this).closest('label').addClass('is-check');\n        }\n    });\n    /**\n     * \n     * テキストフォーカス処理\n     * \n     */\n    $('.jsc-input-text').blur(function() {\n        //もしテキストボックスが空だったら\n        if ($(this).val() == '') {\n            $(this).css('border','1px solid #d56c6c');\n        //テキストボックスに文字が入力されたら\n        } else {\n            $(this).css('border','1px solid #ddd');\n        }\n    });\n    /**\n     * \n     * テキストエリアのフォーカス処理\n     * \n     */\n    $('.jsc-textarea').blur(function() {\n        //もしテキストボックスが空だったら\n        if ($(this).val() == '') {\n            $(this).css('border','1px solid #d56c6c');\n        //テキストボックスに文字が入力されたら\n        } else {\n            $(this).css('border','1px solid #ddd');\n        }\n    });\n    /**\n     * \n     * 読み込み後のスタンプカードのスタンプを付与する値を変更する\n     * \n     */\n    $('.c-list__plus__btn').on('click',function() {\n        var result = parseInt($('.p-stampConfirm__item__number').val());\n        if(result >= 1 && result < 10){\n            result = result + 1;\n            $('.p-stampConfirm__item__number').val(result);\n        }\n    });\n    $('.c-list__minus__btn').on('click',function() {\n        var result = parseInt($('.p-stampConfirm__item__number').val());\n        if(result > 1){\n            result = result - 1;\n            $('.p-stampConfirm__item__number').val(result);\n        }\n    });\n    /**\n     * \n     * お知らせの非表示\n     * \n     */\n    $('.c-notice__close').on('click',function() {\n        $('.c-notice').fadeOut();\n    });\n    /**\n     * \n     * QRコードのリンクコピー\n     * \n     */\n    $('#jsc-linkcopy').on('click', function(){\n        var url = document.getElementById('jsc-linkcopy');\n        execCopy(url.value);\n        alert(\"コピーできました！\");\n    });\n    function execCopy(string){\n        // 空div 生成\n        var tmp = document.createElement(\"div\");\n        // 選択用のタグ生成\n        var pre = document.createElement('pre');\n      \n        // 親要素のCSSで user-select: none だとコピーできないので書き換える\n        pre.style.webkitUserSelect = 'auto';\n        pre.style.userSelect = 'auto';\n      \n        tmp.appendChild(pre).textContent = string;\n      \n        // 要素を画面外へ\n        var s = tmp.style;\n        s.position = 'fixed';\n        s.right = '200%';\n      \n        document.body.appendChild(tmp);\n        document.getSelection().selectAllChildren(tmp);\n      \n        var result = document.execCommand(\"copy\");\n      \n        document.body.removeChild(tmp);\n      \n        return result;\n    }\n    /**\n     * クーポン\n     * ajax　DL数ソート処理\n     * \n     */\n    $('.jsc-download-coupon').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/coupon_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_coupon(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    /**\n     * クーポン\n     * ajax　使用回数ソート処理\n     * \n     */\n    $('.jsc-usecount-coupon').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/coupon_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_coupon(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    /**\n     * クーポン\n     * ajax　最終更新日ソート処理\n     * \n     */\n    $('.jsc-last-updated-coupon').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/coupon_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_coupon(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    /**\n     * クーポン\n     * ajax　作成日ソート処理\n     * \n     */\n    $('.jsc-create-date-coupon').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/coupon_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_coupon(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    /**\n     * スタンプカード\n     * ajax　DL数ソート処理\n     * \n     */\n    $('.jsc-download-stampcard').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/stampcard_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_stampcard(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    /**\n     * スタンプカード\n     * ajax　最終更新日ソート処理\n     * \n     */\n    $('.jsc-last-updated-stampcard').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/stampcard_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_stampcard(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    /**\n     * スタンプカード\n     * ajax　作成日ソート処理\n     * \n     */\n    $('.jsc-create-date-stampcard').on('click', function(){\n        var csrf = $('input[name=_csrfToken]').val();\n        var param = $(this).prop('id');\n        $.ajax({\n            url: '/analytics/stampcard_api?param=' + param,\n            type: 'POST',\n            dataType: 'json',\n            beforeSend: function(xhr){\n                xhr.setRequestHeader('X-CSRF-Token', csrf);\n            },\n            timeout: 5000,\n        })\n        .done(function(result){\n            var json = JSON.stringify(result);\n            json = JSON.parse(json);\n            $('#diary-all-pager').pagination({\n                dataSource: json,\n                pageSize: 10, // 1ページあたりの表示数\n                prevText: '&lt;',\n                nextText: '&gt;',\n                ulClassName: 'c-pagination__list',\n                callback: function(data) {\n                    // dataの中に次に表示すべきデータが入っているので、html要素に変換\n                    $('#ajax_list').html(template_stampcard(data));\n                }\n            });\n        })\n        .fail(function (XMLHttpRequest, textStatus, errorThrown){\n            console.log(\"XMLHttpRequest : \" + XMLHttpRequest.status);\n            console.log(\"textStatus     : \" + textStatus);\n            console.log(\"errorThrown    : \" + errorThrown.message);\n        });\n    });\n    \n\n    function template_coupon(data) {\n        return data.map(function(val){\n            var dl = 0;\n            var count = 0;\n            var beforeDate = moment(val.update_at,'YYYY/MM/DD');\n            var update_at = beforeDate.format('YYYY/MM/DD');\n            var beforeDate2 = moment(val.create_at,'YYYY/MM/DD');\n            var create_at = beforeDate2.format('YYYY/MM/DD');\n\n            // DL数\n            $.each(val.child_coupons, function(i,dl_val){\n                dl++;\n            });\n            // 使用回数\n            $.each(val.child_coupons, function(limit,count_limit){\n                count = count_limit.limit_count;\n            });\n\n            if(val.release_id == 1){\n                return \"<tr class='c-analytics__table__tr'>\" +\n                    \"<td><a href='/coupons/\"+val.id+\"/edit'>\"+val.title+\"</a></td>\"+\n                    \"<td><span class='c-analytics__table__tag is-active'>公開中</span></td>\"+\n                    \"<td>\"+ dl +\"</td>\"+\n                    \"<td>\"+ count +\"</td>\"+\n                    \"<td>\"+ update_at +\"</td>\"+\n                    \"<td>\"+ create_at +\"</td>\"+\n                \"</tr>\";\n            } else {\n                return \"<tr class='c-analytics__table__tr'>\" +\n                    \"<td><a href='/coupons/\"+val.id+\"/edit'>\"+val.title+\"</a></td>\"+\n                    \"<td><span class='c-analytics__table__tag'>非公開</span></td>\"+\n                    \"<td>\"+ dl +\"</td>\"+\n                    \"<td>\"+ count +\"</td>\"+\n                    \"<td>\"+ update_at +\"</td>\"+\n                    \"<td>\"+ create_at +\"</td>\"+\n                \"</tr>\";\n            }\n        })\n    }\n    function template_stampcard(data) {\n        return data.map(function(val){\n            var dl = 0;\n            var beforeDate = moment(val.update_at,'YYYY/MM/DD');\n            var update_at = beforeDate.format('YYYY/MM/DD');\n            var beforeDate2 = moment(val.create_at,'YYYY/MM/DD');\n            var create_at = beforeDate2.format('YYYY/MM/DD');\n\n            // DL数\n            $.each(val.child_stampcards, function(i,dl_val){\n                dl++;\n            });\n\n            if(val.release_id == 1){\n                return \"<tr class='c-analytics__table__tr'>\" +\n                    \"<td><a href='/stampcards/\"+val.id+\"/edit'>\"+val.title+\"</a></td>\"+\n                    \"<td><span class='c-analytics__table__tag is-active'>公開中</span></td>\"+\n                    \"<td>\"+ dl +\"</td>\"+\n                    \"<td>\"+ update_at +\"</td>\"+\n                    \"<td>\"+ create_at +\"</td>\"+\n                \"</tr>\";\n            } else {\n                return \"<tr class='c-analytics__table__tr'>\" +\n                    \"<td><a href='/stampcards/\"+val.id+\"/edit'>\"+val.title+\"</a></td>\"+\n                    \"<td><span class='c-analytics__table__tag'>非公開</span></td>\"+\n                    \"<td>\"+ dl +\"</td>\"+\n                    \"<td>\"+ update_at +\"</td>\"+\n                    \"<td>\"+ create_at +\"</td>\"+\n                \"</tr>\";\n            }\n        })\n    }\n});"]}